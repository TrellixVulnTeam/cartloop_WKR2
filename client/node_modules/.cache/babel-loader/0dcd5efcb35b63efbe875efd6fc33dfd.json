{"ast":null,"code":"var _jsxFileName = \"/Users/haleliamiad/Desktop/interviews/cartloop-chat/frontend/src/context/ChatContext.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useState, useEffect } from 'react';\nimport io from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ChatProvider = /*#__PURE__*/createContext();\nexport const ChatContext = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [id, setId] = useState();\n  const [messages, setMessages] = useState([]);\n  const [message, setMessage] = useState('');\n  const socketRef = useRef();\n\n  function sendMessage(e) {\n    e.preventDefault();\n    const messageObject = {\n      body: message,\n      id\n    };\n    setMessage('');\n    socketRef.current.emit('send message', messageObject);\n  }\n\n  function handleChange(e) {\n    setMessage(e.target.value);\n  }\n\n  useEffect(() => {\n    socketRef.current = io.connect(`http://${window.location.hostname}:3030`);\n    socketRef.current.on('set id', userId => {\n      setId(userId);\n    });\n    socketRef.current.on('message', message => {\n      receivedMessage(message);\n    });\n  }, []);\n\n  function receivedMessage(message) {\n    setMessages(oldMsgs => [...oldMsgs, message]);\n  }\n\n  return /*#__PURE__*/_jsxDEV(ChatContext.Provider, {\n    value: {\n      receivedMessage,\n      handleChange,\n      sendMessage,\n      messages,\n      message,\n      id\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ChatContext, \"V0UOlsUmV+gl84pwZr53PAbO+v0=\");\n\n_c = ChatContext;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatContext\");","map":{"version":3,"sources":["/Users/haleliamiad/Desktop/interviews/cartloop-chat/frontend/src/context/ChatContext.js"],"names":["createContext","useState","useEffect","io","ChatProvider","ChatContext","children","id","setId","messages","setMessages","message","setMessage","socketRef","useRef","sendMessage","e","preventDefault","messageObject","body","current","emit","handleChange","target","value","connect","window","location","hostname","on","userId","receivedMessage","oldMsgs"],"mappings":";;;AAAA,SAASA,aAAT,EAAwBC,QAAxB,EAAkCC,SAAlC,QAAmD,OAAnD;AACA,OAAOC,EAAP,MAAe,kBAAf;;AACA,OAAO,MAAMC,YAAY,gBAAGJ,aAAa,EAAlC;AAEP,OAAO,MAAMK,WAAW,GAAG,QAAkB;AAAA;;AAAA,MAAjB;AAAEC,IAAAA;AAAF,GAAiB;AACzC,QAAM,CAACC,EAAD,EAAKC,KAAL,IAAcP,QAAQ,EAA5B;AACA,QAAM,CAACQ,QAAD,EAAWC,WAAX,IAA0BT,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACU,OAAD,EAAUC,UAAV,IAAwBX,QAAQ,CAAC,EAAD,CAAtC;AAEA,QAAMY,SAAS,GAAGC,MAAM,EAAxB;;AACA,WAASC,WAAT,CAAqBC,CAArB,EAAwB;AACpBA,IAAAA,CAAC,CAACC,cAAF;AACA,UAAMC,aAAa,GAAG;AAClBC,MAAAA,IAAI,EAAER,OADY;AAElBJ,MAAAA;AAFkB,KAAtB;AAIAK,IAAAA,UAAU,CAAC,EAAD,CAAV;AACAC,IAAAA,SAAS,CAACO,OAAV,CAAkBC,IAAlB,CAAuB,cAAvB,EAAuCH,aAAvC;AACH;;AAED,WAASI,YAAT,CAAsBN,CAAtB,EAAyB;AACrBJ,IAAAA,UAAU,CAACI,CAAC,CAACO,MAAF,CAASC,KAAV,CAAV;AACH;;AAGDtB,EAAAA,SAAS,CAAC,MAAM;AACZW,IAAAA,SAAS,CAACO,OAAV,GAAoBjB,EAAE,CAACsB,OAAH,CAAY,UAASC,MAAM,CAACC,QAAP,CAAgBC,QAAS,OAA9C,CAApB;AACAf,IAAAA,SAAS,CAACO,OAAV,CAAkBS,EAAlB,CAAqB,QAArB,EAAgCC,MAAD,IAAY;AACvCtB,MAAAA,KAAK,CAACsB,MAAD,CAAL;AACH,KAFD;AAIAjB,IAAAA,SAAS,CAACO,OAAV,CAAkBS,EAAlB,CAAqB,SAArB,EAAiClB,OAAD,IAAa;AACzCoB,MAAAA,eAAe,CAACpB,OAAD,CAAf;AACH,KAFD;AAGH,GATQ,EASN,EATM,CAAT;;AAWA,WAASoB,eAAT,CAAyBpB,OAAzB,EAAkC;AAC9BD,IAAAA,WAAW,CAAEsB,OAAD,IAAa,CAAC,GAAGA,OAAJ,EAAarB,OAAb,CAAd,CAAX;AACH;;AAED,sBACI,QAAC,WAAD,CAAa,QAAb;AACI,IAAA,KAAK,EAAE;AACHoB,MAAAA,eADG;AACcT,MAAAA,YADd;AAC4BP,MAAAA,WAD5B;AACyCN,MAAAA,QADzC;AACmDE,MAAAA,OADnD;AAC4DJ,MAAAA;AAD5D,KADX;AAAA,cAIKD;AAJL;AAAA;AAAA;AAAA;AAAA,UADJ;AAQH,CA5CM;;GAAMD,W;;KAAAA,W","sourcesContent":["import { createContext, useState, useEffect } from 'react'\nimport io from 'socket.io-client';\nexport const ChatProvider = createContext()\n\nexport const ChatContext = ({ children }) => {\n    const [id, setId] = useState();\n    const [messages, setMessages] = useState([]);\n    const [message, setMessage] = useState('');\n\n    const socketRef = useRef();\n    function sendMessage(e) {\n        e.preventDefault();\n        const messageObject = {\n            body: message,\n            id\n        };\n        setMessage('');\n        socketRef.current.emit('send message', messageObject);\n    }\n\n    function handleChange(e) {\n        setMessage(e.target.value);\n    }\n\n\n    useEffect(() => {\n        socketRef.current = io.connect(`http://${window.location.hostname}:3030`);\n        socketRef.current.on('set id', (userId) => {\n            setId(userId);\n        });\n\n        socketRef.current.on('message', (message) => {\n            receivedMessage(message);\n        });\n    }, []);\n\n    function receivedMessage(message) {\n        setMessages((oldMsgs) => [...oldMsgs, message]);\n    }\n\n    return (\n        <ChatContext.Provider\n            value={{\n                receivedMessage, handleChange, sendMessage, messages, message, id\n            }}>\n            {children}\n        </ChatContext.Provider>\n    )\n}"]},"metadata":{},"sourceType":"module"}